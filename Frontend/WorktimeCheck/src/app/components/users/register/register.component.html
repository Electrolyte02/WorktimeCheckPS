<div class="background">
  <div class="container">
    <div class="auth-container">
      <h1 class="auth-title">Registro</h1>
      <form #registerForm="ngForm" (ngSubmit)="onSubmit(registerForm)">
        <label for="name">Nombre Usuario</label>
        <input 
          type="text" 
          id="name" 
          required 
          minlength="3"
          [(ngModel)]="user.userName" 
          name="userName"
          #userName="ngModel"
          [class.error]="userName.invalid && userName.touched"
        />
        <div class="error-message" *ngIf="userName.invalid && userName.touched">
          <span *ngIf="userName.errors?.['required']">El nombre de usuario es requerido</span>
          <span *ngIf="userName.errors?.['minlength']">El nombre de usuario debe tener al menos 3 caracteres</span>
        </div>

        <label for="email">Correo Electrónico</label>
        <input 
          type="email" 
          id="email" 
          required 
          email
          [(ngModel)]="user.email" 
          name="email"
          #email="ngModel"
          [class.error]="email.invalid && email.touched"
        />
        <div class="error-message" *ngIf="email.invalid && email.touched">
          <span *ngIf="email.errors?.['required']">El correo electrónico es requerido</span>
          <span *ngIf="email.errors?.['email']">Ingrese un correo electrónico válido</span>
        </div>

        <label for="password">Contraseña</label>
        <input 
          type="password" 
          id="password" 
          required 
          minlength="6"
          [(ngModel)]="user.password" 
          name="password"
          #password="ngModel"
          [class.error]="password.invalid && password.touched"
        />
        <div class="error-message" *ngIf="password.invalid && password.touched">
          <span *ngIf="password.errors?.['required']">La contraseña es requerida</span>
          <span *ngIf="password.errors?.['minlength']">La contraseña debe tener al menos 6 caracteres</span>
        </div>

        <div class="checkbox-container">
          <input 
            type="checkbox" 
            id="termsAccepted" 
            required
            [(ngModel)]="termsAccepted" 
            name="termsAccepted"
            #termsAcceptedRef="ngModel"
          />
          <label for="termsAccepted">
            Acepto los 
            <a (click)="openTermsModal()" class="link">Términos y Condiciones</a>
          </label>
        </div>
        <div class="error-message" *ngIf="termsAcceptedRef.invalid && termsAcceptedRef.touched">
          <span *ngIf="termsAcceptedRef.errors?.['required']">Debe aceptar los términos y condiciones</span>
        </div>

        <div class="checkbox-container">
          <input 
            type="checkbox" 
            id="privacyAccepted" 
            required
            [(ngModel)]="privacyAccepted" 
            name="privacyAccepted"
            #privacyAcceptedRef="ngModel"
          />
          <label for="privacyAccepted">
            Acepto la 
            <a (click)="openPrivacyModal()" class="link">Política de Privacidad</a>
          </label>
        </div>
        <div class="error-message" *ngIf="privacyAcceptedRef.invalid && privacyAcceptedRef.touched">
          <span *ngIf="privacyAcceptedRef.errors?.['required']">Debe aceptar la política de privacidad</span>
        </div>

        <button type="submit" [disabled]="registerForm.invalid">Registrarse</button>
        <p class="switch-form">¿Ya tienes cuenta? <a (click)="redirectLogin()">Iniciar sesión</a></p>
      </form>

      <!-- Modal de Términos y Condiciones -->
      <div class="modal-overlay" *ngIf="showTermsModal" (click)="closeTermsModal()">
        <div class="modal-content" (click)="$event.stopPropagation()">
          <div class="modal-header">
            <h2>Términos y Condiciones</h2>
            <button class="close-btn" (click)="closeTermsModal()">&times;</button>
          </div>
          <div class="modal-body">
            <h3><strong>TÉRMINOS Y CONDICIONES DE USO - WorktimeCheck</strong></h3>
            <p>Bienvenido a WorktimeCheck, proporcionado por Monitora Seguridad Inteligente S.R.L., en adelante la "Compañía", "nosotros" o "nos".</p>
            <p>Nos complace ofrecerle acceso al Servicio de WorktimeCheck el cuál se encuentra sujeto a estos términos y condiciones y a la correspondiente Política de Privacidad.</p>
            <p>Al acceder y utilizar el Servicio, usted manifiesta su consentimiento, acuerdo y entendimiento de los presentes Términos de Servicio y de la Política de Privacidad. Si no está de acuerdo con ellos, no utilice el Servicio.</p>
            <p>El uso de WorktimeCheck implica aceptación de las condiciones operativas vigentes detalladas a continuación, incluyendo aquellas que se implementen en el futuro.</p>
            
            <h4><strong>Operaciones habilitadas</strong></h4>
            <p>El uso de WorktimeCheck está habilitado exclusivamente para los empleados, gerentes y administradores de Monitora Seguridad Inteligente S.R.L.</p>
            <p>Las operaciones disponibles comprenden, entre otras:</p>
            <ul>
              <li>Registro y consulta de ingresos y egresos laborales.</li>
              <li>Justificación de ingresos tardíos o salidas anticipadas por parte del empleado.</li>
              <li>Revisión, aprobación o rechazo de justificaciones por parte de gerentes o administradores.</li>
              <li>Visualización de reportes estadísticos y KPIs por parte de administradores.</li>
            </ul>
            <p>Estas funcionalidades podrán ser ampliadas o restringidas por la Compañía con una notificación previa de al menos 30 días.</p>
            
            <h4><strong>Acceso y uso del Servicio</strong></h4>
            <p>Para acceder a WorktimeCheck, el usuario deberá estar registrado como parte del personal activo de la empresa y utilizar un dispositivo conectado a Internet.</p>
            <p>El ingreso al sistema requiere la validación mediante CUIT o CUIL, correo institucional y una clave personal e intransferible. El uso y resguardo de esta clave es responsabilidad exclusiva del usuario.</p>
            <p>Monitora Seguridad Inteligente S.R.L. no solicitará credenciales completas ni enviará comunicaciones electrónicas pidiendo datos personales.</p>
            
            <h4><strong>Costo del Servicio</strong></h4>
            <p>WorktimeCheck es un servicio provisto de forma gratuita a los empleados de Monitora Seguridad Inteligente S.R.L. No se prevén cargos actuales ni futuros por su uso.</p>
            
            <h4><strong>Vigencia</strong></h4>
            <p>El acceso al sistema estará vigente mientras el usuario mantenga su vínculo laboral con Monitora Seguridad Inteligente S.R.L. Una vez finalizada la relación laboral, se revocará el acceso sin necesidad de notificación previa y sin que ello implique derecho alguno a reclamos, compensaciones o indemnizaciones.</p>
            <p>En caso de incumplimiento de estos Términos y Condiciones, la empresa podrá dar de baja el acceso de forma inmediata.</p>
            
            <h4><strong>Validez de operaciones y notificaciones</strong></h4>
            <p>Los registros generados por WorktimeCheck constituyen prueba válida y suficiente de las operaciones realizadas a través del sistema.</p>
            <p>Asimismo, todas las notificaciones generadas por la plataforma (como avisos de justificaciones pendientes o aprobadas) tendrán validez legal equivalente a una notificación escrita.</p>
            
            <h4><strong>Propiedad Intelectual</strong></h4>
            <p>WorktimeCheck es un software desarrollado exclusivamente para uso interno de Monitora Seguridad Inteligente S.R.L. y está protegido por la Ley N.º 11.723 de Propiedad Intelectual de la República Argentina. Todos los derechos reservados.</p>
          </div>
        </div>
      </div>

      <!-- Modal de Política de Privacidad -->
      <div class="modal-overlay" *ngIf="showPrivacyModal" (click)="closePrivacyModal()">
        <div class="modal-content" (click)="$event.stopPropagation()">
          <div class="modal-header">
            <h2>Política de Privacidad</h2>
            <button class="close-btn" (click)="closePrivacyModal()">&times;</button>
          </div>
          <div class="modal-body">
            <h3><strong>POLÍTICA DE PRIVACIDAD - WorktimeCheck</strong></h3>
            
            <h4><strong>Recolección de datos</strong></h4>
            <p>Para operar correctamente, WorktimeCheck requiere que los usuarios proporcionen los siguientes datos personales:</p>
            <ul>
              <li>Nombre completo</li>
              <li>CUIT o CUIL</li>
              <li>Correo electrónico institucional</li>
              <li>Rol asignado (empleado, gerente o administrador)</li>
              <li>Área de trabajo</li>
              <li>Horarios laborales asignados</li>
            </ul>
            
            <h4><strong>Uso de los datos</strong></h4>
            <p>Los datos recopilados son utilizados únicamente con los siguientes fines:</p>
            <ul>
              <li>Identificación del usuario en la plataforma</li>
              <li>Registro de asistencias</li>
              <li>Justificación y validación de ingresos/egresos</li>
              <li>Generación de reportes internos de desempeño y cumplimiento horario</li>
              <li>Notificaciones por correo sobre acciones en la plataforma (como estados de los trámites, registro, entre otros.)</li>
            </ul>
            
            <h4><strong>Almacenamiento y acceso</strong></h4>
            <p>Los datos personales son almacenados en una base de datos interna, ubicada en servidores propios de Monitora Seguridad Inteligente S.R.L. No se utilizan proveedores externos de almacenamiento ni se transfiere la información a terceros.</p>
            
            <h4><strong>Confidencialidad</strong></h4>
            <p>Los datos personales son tratados con estricta confidencialidad y sólo pueden ser accedidos por personal autorizado de la empresa en el ejercicio de sus funciones administrativas o de gestión de personal.</p>
            
            <h4><strong>Conservación de datos</strong></h4>
            <p>Los datos serán conservados en la base de datos mientras el usuario mantenga una relación laboral con Monitora Seguridad Inteligente S.R.L.</p>
            <p>Una vez finalizado dicho vínculo, la información se archivará internamente y quedará a disposición de la empresa para fines administrativos o legales, conforme las políticas internas de retención de información.</p>
            
            <h4><strong>Contacto</strong></h4>
            <p>Para consultas relacionadas con el uso de la plataforma o el tratamiento de sus datos personales, los usuarios pueden contactar al encargado del área de Sistemas de Monitora Seguridad Inteligente S.R.L. mediante correo electrónico interno u otras vías de comunicación oficiales de Monitora Seguridad Inteligente S.R.L.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>